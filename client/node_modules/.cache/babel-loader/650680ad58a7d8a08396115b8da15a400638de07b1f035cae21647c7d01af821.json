{"ast":null,"code":"var _jsxFileName = \"D:\\\\Task_Tracker\\\\client\\\\income-expenses-tracker\\\\src\\\\components\\\\context\\\\TransactionContext\\\\TransactionsContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useReducer } from \"react\";\nimport axios from \"axios\";\nimport { TRANSACTION_CREATION_STARTED, TRANSACTION_CREATION_SUCCES, TRANSACTION_CREATION_FAIL } from \"./transactionsActionTypes\";\nimport { API_URL_TRANSACTION } from \"../../../utils/apiURL\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const transactionContext = /*#__PURE__*/createContext();\nconst INITIAL_STATE = {\n  transaction: null,\n  transactions: [],\n  loading: false,\n  error: null,\n  token: JSON.parse(localStorage.getItem(\"userAuth\"))\n};\nconst transactionReducer = (state, action) => {\n  const {\n    type,\n    payload\n  } = action;\n  switch (type) {\n    case TRANSACTION_CREATION_SUCCES:\n      return {\n        ...state,\n        loading: false,\n        transaction: payload\n      };\n    case TRANSACTION_CREATION_FAIL:\n      return {\n        ...state,\n        loading: false,\n        error: payload\n      };\n    default:\n      return state;\n  }\n};\nexport const TransactionContextProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(transactionReducer, INITIAL_STATE);\n\n  //create account\n  const createTransactionAction = async accountData => {\n    try {\n      var _state$token, _res$data;\n      //header\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${state === null || state === void 0 ? void 0 : (_state$token = state.token) === null || _state$token === void 0 ? void 0 : _state$token.token}`\n        }\n      };\n      //request\n      const res = await axios.post(API_URL_TRANSACTION, accountData, config);\n      console.log(res);\n      if ((res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.status) === \"success\") {\n        dispatch({\n          type: TRANSACTION_CREATION_SUCCES,\n          payload: res === null || res === void 0 ? void 0 : res.data\n        });\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      dispatch({\n        type: TRANSACTION_CREATION_FAIL,\n        payload: error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(transactionContext.Provider, {\n    value: {\n      transaction: state.transaction,\n      transactions: state.transactions,\n      createTransactionAction,\n      error: state === null || state === void 0 ? void 0 : state.error\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(TransactionContextProvider, \"ih+Vd9fHXqjzC8XFlo5K5uS4lm8=\");\n_c = TransactionContextProvider;\nvar _c;\n$RefreshReg$(_c, \"TransactionContextProvider\");","map":{"version":3,"names":["React","createContext","useReducer","axios","TRANSACTION_CREATION_STARTED","TRANSACTION_CREATION_SUCCES","TRANSACTION_CREATION_FAIL","API_URL_TRANSACTION","jsxDEV","_jsxDEV","transactionContext","INITIAL_STATE","transaction","transactions","loading","error","token","JSON","parse","localStorage","getItem","transactionReducer","state","action","type","payload","TransactionContextProvider","children","_s","dispatch","createTransactionAction","accountData","_state$token","_res$data","config","headers","Authorization","res","post","console","log","data","status","_error$response","_error$response$data","response","message","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Task_Tracker/client/income-expenses-tracker/src/components/context/TransactionContext/TransactionsContext.js"],"sourcesContent":["import React, { createContext, useReducer } from \"react\";\nimport axios from \"axios\";\nimport {\n  TRANSACTION_CREATION_STARTED,\n  TRANSACTION_CREATION_SUCCES,\n  TRANSACTION_CREATION_FAIL,\n} from \"./transactionsActionTypes\";\nimport { API_URL_TRANSACTION } from \"../../../utils/apiURL\";\n\nexport const transactionContext = createContext();\n\nconst INITIAL_STATE = {\n  transaction: null,\n  transactions: [],\n  loading: false,\n  error: null,\n  token: JSON.parse(localStorage.getItem(\"userAuth\")),\n};\nconst transactionReducer = (state, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    case TRANSACTION_CREATION_SUCCES:\n      return {\n        ...state,\n        loading: false,\n        transaction: payload,\n      };\n    case TRANSACTION_CREATION_FAIL:\n      return {\n        ...state,\n        loading: false,\n        error: payload,\n      };\n    default:\n      return state;\n  }\n};\n\nexport const TransactionContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(transactionReducer, INITIAL_STATE);\n\n  //create account\n  const createTransactionAction = async accountData => {\n    try {\n      //header\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${state?.token?.token}`,\n        },\n      };\n      //request\n      const res = await axios.post(API_URL_TRANSACTION, accountData, config);\n      console.log(res);\n      if (res?.data?.status === \"success\") {\n        dispatch({ type: TRANSACTION_CREATION_SUCCES, payload: res?.data });\n      }\n    } catch (error) {\n      dispatch({\n        type: TRANSACTION_CREATION_FAIL,\n        payload: error?.response?.data?.message,\n      });\n    }\n  };\n  return (\n    <transactionContext.Provider\n      value={{\n        transaction: state.transaction,\n        transactions: state.transactions,\n        createTransactionAction,\n        error: state?.error,\n      }}\n    >\n      {children}\n    </transactionContext.Provider>\n  );\n};\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,QAAQ,OAAO;AACxD,OAAOC,KAAK,MAAM,OAAO;AACzB,SACEC,4BAA4B,EAC5BC,2BAA2B,EAC3BC,yBAAyB,QACpB,2BAA2B;AAClC,SAASC,mBAAmB,QAAQ,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5D,OAAO,MAAMC,kBAAkB,gBAAGT,aAAa,CAAC,CAAC;AAEjD,MAAMU,aAAa,GAAG;EACpBC,WAAW,EAAE,IAAI;EACjBC,YAAY,EAAE,EAAE;EAChBC,OAAO,EAAE,KAAK;EACdC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;AACpD,CAAC;AACD,MAAMC,kBAAkB,GAAGA,CAACC,KAAK,EAAEC,MAAM,KAAK;EAC5C,MAAM;IAAEC,IAAI;IAAEC;EAAQ,CAAC,GAAGF,MAAM;EAChC,QAAQC,IAAI;IACV,KAAKnB,2BAA2B;MAC9B,OAAO;QACL,GAAGiB,KAAK;QACRR,OAAO,EAAE,KAAK;QACdF,WAAW,EAAEa;MACf,CAAC;IACH,KAAKnB,yBAAyB;MAC5B,OAAO;QACL,GAAGgB,KAAK;QACRR,OAAO,EAAE,KAAK;QACdC,KAAK,EAAEU;MACT,CAAC;IACH;MACE,OAAOH,KAAK;EAChB;AACF,CAAC;AAED,OAAO,MAAMI,0BAA0B,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC1D,MAAM,CAACN,KAAK,EAAEO,QAAQ,CAAC,GAAG3B,UAAU,CAACmB,kBAAkB,EAAEV,aAAa,CAAC;;EAEvE;EACA,MAAMmB,uBAAuB,GAAG,MAAMC,WAAW,IAAI;IACnD,IAAI;MAAA,IAAAC,YAAA,EAAAC,SAAA;MACF;MACA,MAAMC,MAAM,GAAG;QACbC,OAAO,EAAE;UACP,cAAc,EAAE,kBAAkB;UAClCC,aAAa,EAAG,UAASd,KAAK,aAALA,KAAK,wBAAAU,YAAA,GAALV,KAAK,CAAEN,KAAK,cAAAgB,YAAA,uBAAZA,YAAA,CAAchB,KAAM;QAC/C;MACF,CAAC;MACD;MACA,MAAMqB,GAAG,GAAG,MAAMlC,KAAK,CAACmC,IAAI,CAAC/B,mBAAmB,EAAEwB,WAAW,EAAEG,MAAM,CAAC;MACtEK,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;MAChB,IAAI,CAAAA,GAAG,aAAHA,GAAG,wBAAAJ,SAAA,GAAHI,GAAG,CAAEI,IAAI,cAAAR,SAAA,uBAATA,SAAA,CAAWS,MAAM,MAAK,SAAS,EAAE;QACnCb,QAAQ,CAAC;UAAEL,IAAI,EAAEnB,2BAA2B;UAAEoB,OAAO,EAAEY,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEI;QAAK,CAAC,CAAC;MACrE;IACF,CAAC,CAAC,OAAO1B,KAAK,EAAE;MAAA,IAAA4B,eAAA,EAAAC,oBAAA;MACdf,QAAQ,CAAC;QACPL,IAAI,EAAElB,yBAAyB;QAC/BmB,OAAO,EAAEV,KAAK,aAALA,KAAK,wBAAA4B,eAAA,GAAL5B,KAAK,CAAE8B,QAAQ,cAAAF,eAAA,wBAAAC,oBAAA,GAAfD,eAAA,CAAiBF,IAAI,cAAAG,oBAAA,uBAArBA,oBAAA,CAAuBE;MAClC,CAAC,CAAC;IACJ;EACF,CAAC;EACD,oBACErC,OAAA,CAACC,kBAAkB,CAACqC,QAAQ;IAC1BC,KAAK,EAAE;MACLpC,WAAW,EAAEU,KAAK,CAACV,WAAW;MAC9BC,YAAY,EAAES,KAAK,CAACT,YAAY;MAChCiB,uBAAuB;MACvBf,KAAK,EAAEO,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEP;IAChB,CAAE;IAAAY,QAAA,EAEDA;EAAQ;IAAAsB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACkB,CAAC;AAElC,CAAC;AAACxB,EAAA,CAtCWF,0BAA0B;AAAA2B,EAAA,GAA1B3B,0BAA0B;AAAA,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}